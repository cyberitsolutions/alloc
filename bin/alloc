#!/usr/bin/env python

import sys
from alloccli import alloc

# Try to import relevant module
try:
    # Get the module name from the passed options
    module = sys.argv[1]
    #
    # "Note: This is an advanced function that is not needed in everyday Python
    # programming, unlike importlib.import_module()."
    #
    # Here we import the module.
    acli = __import__("alloccli." + module)
    # Now we get the class from the module, e.g.: alloccli.task.task
    subcommand = getattr(getattr(acli, module), module)

# Else bomb out with help message
except:
    alloc.alloc().get_cli_help()

# All clear, run the module
# FIXME:: Is it just me? or does it seem like a stupid idea to run this outside
# of the try cluse? -- cjb, 06-2015
subcommand().run(sys.argv)
