#!/usr/bin/env python

import sys
from alloccli import alloc

# Try to import relevant module
try:
    # Get the module name from the passed options
    module = sys.argv[1]
    #
    # "Note: This is an advanced function that is not needed in everyday Python
    # programming, unlike importlib.import_module()."
    #
    # Here we import the module.
    acli = __import__("alloccli." + module)
    # Now we get the class from the module, e.g.: alloccli.task.task
    subcommand = getattr(getattr(acli, module), module)
    subcommand().run(sys.argv)

# Else bomb out with help message.
# NOTE:: we must use `except Exception:` so the help does not get call
# everytime a module calls sys.exit()
except Exception:
    alloc.alloc().get_cli_help()
